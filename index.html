<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Be Love Lobby</title>
    <meta name="description" content="Belove Lobby V1 - Debug Test">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
    <a-scene background="color: #1a1a1a"
             cursor="rayOrigin: mouse"
             raycaster="objects: .clickable">

      <!-- Opaque Sphere Lobby -->
      <a-entity geometry="primitive: sphere; radius: 30"
                material="color: #87ceeb; opacity: 1; side: back"
                position="0 0 0"></a-entity>

      <!-- Room Portals Container (dynamically filled below) -->
      <a-entity id="portals" place-portals></a-entity>

      <!-- Camera Rig -->
      <a-entity id="cameraRig" position="0 1.6 0">
        <a-camera wasd-controls-enabled="true" look-controls></a-camera>
      </a-entity>

      <!-- Logo -->
      <a-image src="Be%20Love%20Watercolor%20Logo.png"
               position="0 2 -4"
               width="3"
               height="3"
               transparent="true">
      </a-image>
    </a-scene>

    <!-- JS to Place Portals in Sphere Layout -->
    <script>
      AFRAME.registerComponent('place-portals', {
        schema: {
          radius: {type: 'number', default: 28} // slightly smaller than your sphere's radius
        },
        init: function () {
          const radius = this.data.radius;

          const roomData = [
            {
              title: "Room 1",
              label: "Enter Room 1 to learn about your host and Instinctive Meditation",
              href: "room1.html"
            },
            {
              title: "Room 2",
              label: "Enter Room 2 to receive healing reiki energy",
              href: "room2.html"
            },
            // Add more rooms here if you like
          ];

          roomData.forEach((room, i) => {
            const theta = Math.acos(-1 + (2 * i) / roomData.length);
            const phi = Math.PI * (1 + Math.sqrt(5)) * i;

            const x = radius * Math.sin(theta) * Math.cos(phi);
            const y = radius * Math.cos(theta);
            const z = radius * Math.sin(theta) * Math.sin(phi);

            const portal = document.createElement('a-entity');
            portal.setAttribute('position', `${x} ${y} ${z}`);
            portal.setAttribute('look-at', '[camera]');

            portal.innerHTML = `
              <a-plane color="#ffffff"
                       height="1.2"
                       width="3.5"
                       opacity="0.9"
                       class="clickable"
                       link="href: ${room.href}; title: ${room.title}">
              </a-plane>
              <a-text value="${room.label}"
                      color="#000000"
                      align="center"
                      width="3"
                      wrap-count="35"
                      scale="0.8 0.8 0.8"
                      position="0 0 0.01"></a-text>
            `;

            this.el.appendChild(portal);
          });
        }
      });
    </script>
  </body>
</html>
